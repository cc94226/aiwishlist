import{_ as k,r as y,o as n,c as l,a as s,t as o,g as v,b as m,w as u,d as _,F as p,f as b,p as W,k as C,n as f}from"./index-DT7EbbfQ.js";import{b as U,c as D}from"./wishService-BU8yXoRe.js";const j={name:"Dashboard",data(){return{currentUser:null,myWishes:[],favoritedWishes:[],stats:{submittedWishes:0,favoritedWishes:0,totalLikes:0,totalComments:0}}},mounted(){this.loadUser(),this.loadData()},methods:{loadUser(){this.currentUser=C()},loadData(){if(!this.currentUser)return;const a=U(this.currentUser.id||this.currentUser.name);this.myWishes=a.sort((r,e)=>new Date(e.createdAt)-new Date(r.createdAt)).slice(0,10);const t=JSON.parse(localStorage.getItem("favorites")||"[]"),h=D();this.favoritedWishes=h.filter(r=>t.includes(r.id)).sort((r,e)=>new Date(e.createdAt)-new Date(r.createdAt)).slice(0,10),this.stats.submittedWishes=a.length,this.stats.favoritedWishes=t.length,this.stats.totalLikes=a.reduce((r,e)=>r+(e.likes||0),0),this.stats.totalComments=a.reduce((r,e)=>{var d;return r+(((d=e.comments)==null?void 0:d.length)||0)},0)},goToDetail(a){this.$router.push(`/wish/${a}`)},formatDate(a){return new Date(a).toLocaleString("zh-CN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},getJobClass(a){return{å¼€å‘:"job-dev",è®¾è®¡:"job-design",è¡Œæ”¿:"job-admin",äº§å“:"job-product",è¿è¥:"job-operation",æµ‹è¯•:"job-test"}[a]||""},getStatusClass(a){return{published:"status-published",draft:"status-draft",unpublished:"status-unpublished"}[a]||""},getStatusText(a){return{published:"å·²å‘å¸ƒ",draft:"è‰ç¨¿",unpublished:"å·²ä¸‹æ¶"}[a]||a}}},x={class:"dashboard"},S={key:0,class:"dashboard-container"},A={class:"user-info-card"},w={class:"user-avatar"},N={class:"avatar-text"},T={class:"user-details"},L={class:"user-email"},B={class:"user-role"},V={key:0,class:"user-job"},J={class:"stats-grid"},z={class:"stat-card"},F={class:"stat-content"},I={class:"stat-value"},q={class:"stat-card"},E={class:"stat-content"},O={class:"stat-value"},G={class:"stat-card"},H={class:"stat-content"},K={class:"stat-value"},M={class:"stat-card"},P={class:"stat-content"},Q={class:"stat-value"},R={class:"section"},X={class:"section-header"},Y={key:0,class:"wishes-list"},Z=["onClick"],$={class:"wish-item-header"},ss={class:"wish-item-description"},ts={class:"wish-item-footer"},es={class:"wish-meta"},os={class:"wish-stats"},is={class:"likes"},as={class:"comments"},ns={key:1,class:"empty-state"},ls={class:"section"},rs={key:0,class:"wishes-list"},ds=["onClick"],cs={class:"wish-item-header"},us={class:"wish-item-description"},ms={class:"wish-item-footer"},_s={class:"wish-meta"},hs={class:"wish-stats"},vs={class:"likes"},ps={class:"comments"},bs={key:1,class:"empty-state"},fs={class:"section"},gs={class:"quick-actions"},ks={key:1,class:"no-user"};function ys(a,t,h,r,e,d){const c=y("router-link");return n(),l("div",x,[e.currentUser?(n(),l("div",S,[t[20]||(t[20]=s("h2",{class:"dashboard-title"},"ç”¨æˆ·ä»ªè¡¨æ¿",-1)),s("div",A,[s("div",w,[s("span",N,o(e.currentUser.name.charAt(0)),1)]),s("div",T,[s("h3",null,o(e.currentUser.name),1),s("p",L,o(e.currentUser.email),1),s("p",B,o(e.currentUser.role==="admin"?"ç®¡ç†å‘˜":"æ™®é€šç”¨æˆ·"),1),e.currentUser.job?(n(),l("p",V,"å²—ä½ï¼š"+o(e.currentUser.job),1)):v("",!0)])]),s("div",J,[s("div",z,[t[1]||(t[1]=s("div",{class:"stat-icon"},"ğŸ“",-1)),s("div",F,[s("div",I,o(e.stats.submittedWishes),1),t[0]||(t[0]=s("div",{class:"stat-label"},"æäº¤çš„æ„¿æœ›",-1))])]),s("div",q,[t[3]||(t[3]=s("div",{class:"stat-icon"},"â­",-1)),s("div",E,[s("div",O,o(e.stats.favoritedWishes),1),t[2]||(t[2]=s("div",{class:"stat-label"},"æ”¶è—çš„æ„¿æœ›",-1))])]),s("div",G,[t[5]||(t[5]=s("div",{class:"stat-icon"},"ğŸ‘",-1)),s("div",H,[s("div",K,o(e.stats.totalLikes),1),t[4]||(t[4]=s("div",{class:"stat-label"},"è·å¾—çš„ç‚¹èµ",-1))])]),s("div",M,[t[7]||(t[7]=s("div",{class:"stat-icon"},"ğŸ’¬",-1)),s("div",P,[s("div",Q,o(e.stats.totalComments),1),t[6]||(t[6]=s("div",{class:"stat-label"},"æ”¶åˆ°çš„è¯„è®º",-1))])])]),s("div",R,[s("div",X,[t[9]||(t[9]=s("h3",null,"æˆ‘çš„æ„¿æœ›",-1)),m(c,{to:"/submit",class:"btn-primary"},{default:u(()=>[...t[8]||(t[8]=[_("+ æäº¤æ–°æ„¿æœ›",-1)])]),_:1})]),e.myWishes.length>0?(n(),l("div",Y,[(n(!0),l(p,null,b(e.myWishes,i=>(n(),l("div",{key:i.id,class:"wish-item",onClick:g=>d.goToDetail(i.id)},[s("div",$,[s("h4",null,o(i.title),1),s("span",{class:f(["status-badge",d.getStatusClass(i.status)])},o(d.getStatusText(i.status)),3)]),s("p",ss,o(i.description),1),s("div",ts,[s("span",es,o(d.formatDate(i.createdAt)),1),s("div",os,[s("span",is,"ğŸ‘ "+o(i.likes),1),s("span",as,"ğŸ’¬ "+o(i.comments.length),1)])])],8,Z))),128))])):(n(),l("div",ns,[t[11]||(t[11]=s("p",null,"æ‚¨è¿˜æ²¡æœ‰æäº¤ä»»ä½•æ„¿æœ›",-1)),m(c,{to:"/submit",class:"btn-primary"},{default:u(()=>[...t[10]||(t[10]=[_("ç«‹å³æäº¤",-1)])]),_:1})]))]),s("div",ls,[t[14]||(t[14]=s("div",{class:"section-header"},[s("h3",null,"æ”¶è—çš„æ„¿æœ›")],-1)),e.favoritedWishes.length>0?(n(),l("div",rs,[(n(!0),l(p,null,b(e.favoritedWishes,i=>(n(),l("div",{key:i.id,class:"wish-item",onClick:g=>d.goToDetail(i.id)},[s("div",cs,[s("h4",null,o(i.title),1),s("span",{class:f(["job-badge",d.getJobClass(i.job)])},o(i.job),3)]),s("p",us,o(i.description),1),s("div",ms,[s("span",_s,"æäº¤è€…ï¼š"+o(i.submitter),1),s("div",hs,[s("span",vs,"ğŸ‘ "+o(i.likes),1),s("span",ps,"ğŸ’¬ "+o(i.comments.length),1)])])],8,ds))),128))])):(n(),l("div",bs,[t[13]||(t[13]=s("p",null,"æ‚¨è¿˜æ²¡æœ‰æ”¶è—ä»»ä½•æ„¿æœ›",-1)),m(c,{to:"/",class:"btn-secondary"},{default:u(()=>[...t[12]||(t[12]=[_("æµè§ˆæ„¿æœ›",-1)])]),_:1})]))]),s("div",fs,[t[19]||(t[19]=s("h3",null,"å¿«é€Ÿæ“ä½œ",-1)),s("div",gs,[m(c,{to:"/submit",class:"action-btn"},{default:u(()=>[...t[15]||(t[15]=[s("span",{class:"action-icon"},"â•",-1),s("span",null,"æäº¤æ–°æ„¿æœ›",-1)])]),_:1}),m(c,{to:"/",class:"action-btn"},{default:u(()=>[...t[16]||(t[16]=[s("span",{class:"action-icon"},"ğŸ”",-1),s("span",null,"æµè§ˆæ„¿æœ›",-1)])]),_:1}),m(c,{to:"/profile",class:"action-btn"},{default:u(()=>[...t[17]||(t[17]=[s("span",{class:"action-icon"},"ğŸ‘¤",-1),s("span",null,"ä¸ªäººè®¾ç½®",-1)])]),_:1}),e.currentUser.role==="admin"?(n(),W(c,{key:0,to:"/admin",class:"action-btn"},{default:u(()=>[...t[18]||(t[18]=[s("span",{class:"action-icon"},"âš™ï¸",-1),s("span",null,"ç®¡ç†é¢æ¿",-1)])]),_:1})):v("",!0)])])])):(n(),l("div",ks,[t[22]||(t[22]=s("p",null,"è¯·å…ˆç™»å½•",-1)),m(c,{to:"/login",class:"btn-primary"},{default:u(()=>[...t[21]||(t[21]=[_("å‰å¾€ç™»å½•",-1)])]),_:1})]))])}const Us=k(j,[["render",ys],["__scopeId","data-v-8f034657"]]);export{Us as default};
