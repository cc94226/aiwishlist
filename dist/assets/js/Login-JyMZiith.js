import{_ as f,a as g}from"./index-Ca8b0D0Z.js";import{r as c,o as n,c as a,a as r,l as b,j as l,m as d,q as h,t as m,e as v,f as u,b as _,w as M}from"./vue-vendor-CyCdHuvd.js";import"./utils-BSVtTUhg.js";const w={name:"Login",data(){return{formData:{email:"",password:"",rememberMe:!1},errorMessage:"",loading:!1}},mounted(){this.getCurrentUser()&&this.$router.push("/")},methods:{getCurrentUser(){const o=localStorage.getItem("currentUser");return o?JSON.parse(o):null},async handleLogin(){this.errorMessage="",this.loading=!0;try{const o=g(this.formData.email,this.formData.password);if(o.success){const e=this.$route.query.redirect||"/";this.$router.push(e)}else this.errorMessage=o.message||"登录失败，请检查邮箱和密码"}catch(o){this.errorMessage="登录时发生错误，请稍后重试",console.error("Login error:",o)}finally{this.loading=!1}}}},y={class:"login-page"},D={class:"login-container"},k={class:"form-group"},x={class:"form-group"},U={class:"form-group"},V={class:"checkbox-label"},C={key:0,class:"error-message"},L=["disabled"],N={class:"form-footer"};function S(o,e,q,B,s,i){const p=c("router-link");return n(),a("div",y,[r("div",D,[e[9]||(e[9]=r("h2",null,"用户登录",-1)),r("form",{class:"login-form",onSubmit:e[3]||(e[3]=b((...t)=>i.handleLogin&&i.handleLogin(...t),["prevent"]))},[r("div",k,[e[4]||(e[4]=r("label",{for:"email"},"邮箱：",-1)),l(r("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=t=>s.formData.email=t),type:"email",placeholder:"请输入邮箱",required:"",class:"form-input"},null,512),[[d,s.formData.email]])]),r("div",x,[e[5]||(e[5]=r("label",{for:"password"},"密码：",-1)),l(r("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=t=>s.formData.password=t),type:"password",placeholder:"请输入密码",required:"",class:"form-input"},null,512),[[d,s.formData.password]])]),r("div",U,[r("label",V,[l(r("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>s.formData.rememberMe=t),type:"checkbox",class:"checkbox-input"},null,512),[[h,s.formData.rememberMe]]),e[6]||(e[6]=r("span",null,"记住我",-1))])]),s.errorMessage?(n(),a("div",C,m(s.errorMessage),1)):v("",!0),r("button",{type:"submit",class:"btn btn-primary",disabled:s.loading},m(s.loading?"登录中...":"登录"),9,L),r("div",N,[r("p",null,[e[8]||(e[8]=u(" 还没有账号？ ",-1)),_(p,{to:"/register",class:"link"},{default:M(()=>[...e[7]||(e[7]=[u("立即注册",-1)])]),_:1})])])],32)])])}const E=f(w,[["render",S],["__scopeId","data-v-1087b017"]]);export{E as default};
