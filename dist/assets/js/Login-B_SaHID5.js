import{_ as f,a as g}from"./index-C9ou7GSc.js";import{f as c,o as n,c as a,a as s,m as b,k as l,n as d,s as h,t as m,b as v,g as u,d as _,w as M}from"./vue-vendor-BrtzZnCP.js";import"./utils-BcjtJagn.js";const k={name:"Login",data(){return{formData:{email:"",password:"",rememberMe:!1},errorMessage:"",loading:!1}},mounted(){this.getCurrentUser()&&this.$router.push("/")},methods:{getCurrentUser(){const o=localStorage.getItem("currentUser");return o?JSON.parse(o):null},async handleLogin(){this.errorMessage="",this.loading=!0;try{const o=g(this.formData.email,this.formData.password);if(o.success){const e=this.$route.query.redirect||"/";this.$router.push(e)}else this.errorMessage=o.message||"登录失败，请检查邮箱和密码"}catch(o){this.errorMessage="登录时发生错误，请稍后重试",console.error("Login error:",o)}finally{this.loading=!1}}}},w={class:"login-page"},y={class:"login-container"},D={class:"form-group"},x={class:"form-group"},U={class:"form-group"},V={class:"checkbox-label"},C={key:0,class:"error-message"},L=["disabled"],N={class:"form-footer"};function S(o,e,q,B,r,i){const p=c("router-link");return n(),a("div",w,[s("div",y,[e[9]||(e[9]=s("h2",null,"用户登录",-1)),s("form",{class:"login-form",onSubmit:e[3]||(e[3]=b((...t)=>i.handleLogin&&i.handleLogin(...t),["prevent"]))},[s("div",D,[e[4]||(e[4]=s("label",{for:"email"},"邮箱：",-1)),l(s("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=t=>r.formData.email=t),type:"email",placeholder:"请输入邮箱",required:"",class:"form-input"},null,512),[[d,r.formData.email]])]),s("div",x,[e[5]||(e[5]=s("label",{for:"password"},"密码：",-1)),l(s("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=t=>r.formData.password=t),type:"password",placeholder:"请输入密码",required:"",class:"form-input"},null,512),[[d,r.formData.password]])]),s("div",U,[s("label",V,[l(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>r.formData.rememberMe=t),type:"checkbox",class:"checkbox-input"},null,512),[[h,r.formData.rememberMe]]),e[6]||(e[6]=s("span",null,"记住我",-1))])]),r.errorMessage?(n(),a("div",C,m(r.errorMessage),1)):v("",!0),s("button",{type:"submit",class:"btn btn-primary",disabled:r.loading},m(r.loading?"登录中...":"登录"),9,L),s("div",N,[s("p",null,[e[8]||(e[8]=u(" 还没有账号？ ",-1)),_(p,{to:"/register",class:"link"},{default:M(()=>[...e[7]||(e[7]=[u("立即注册",-1)])]),_:1})])])],32)])])}const J=f(k,[["render",S],["__scopeId","data-v-1087b017"]]);export{J as default};
